{% extends 'base.html' %}
{% load static %}

{% block title %}Барбершоп "Острый угол" - Запись{% endblock %}

{% block content %}

<!-- 
  Основная структура страницы состоит из нескольких секций:
  1. О нас
  2. Цитата
  3. Мастера
  4. Услуги
  5. Отзывы
  6. Почему мы
  7. Форма записи

  Каждая секция имеет анимацию fade-in для плавного появления
-->

<!-- Секция "О нас" - краткое описание барбершопа -->
<section id="about" class="container py-5 fade-in">
  <h2>О нас</h2>
  <p>Добро пожаловать в барбершоп "Острый угол" — стиль, качество и внимание к деталям.</p>
</section>

<!-- Секция с цитатой для создания атмосферы -->
<section class="container text-center my-5 fade-in">
  <blockquote class="blockquote">
    <p class="fs-4 fst-italic">"Барбершоп — это не просто стрижка. Это стиль жизни, уверенность и уважение к себе."</p>
    <footer class="blockquote-footer mt-3">Команда "Острый угол"</footer>
  </blockquote>
</section>

<!-- Секция с мастерами - динамическая часть, данные берутся из БД -->
<section id="masters" class="container py-5 bg-light fade-in">
  <h2 class="text-center mb-5">Наши мастера</h2>
  <div class="row">
    {% for master in masters %}
    <div class="col-md-4 mb-4">
      <div class="card h-100 border-0 shadow">
        <!-- Фото мастера с обработкой случая, когда фото отсутствует -->
        <div class="card-img-top overflow-hidden" style="height: 300px;">
          {% if master.photo %}
            <img src="{{ master.photo.url }}" class="img-fluid w-100 h-100 object-fit-cover" alt="{{ master.name }}">
          {% else %}
            <img src="{% static 'images/masters/default.jpg' %}" class="img-fluid w-100 h-100 object-fit-cover" alt="Фото мастера">
          {% endif %}
        </div>
        <div class="card-body">
          <h5 class="card-title text-center">{{ master.name }}</h5>
          <p class="card-text text-center text-muted">{{ master.description }}</p>
        </div>
        <div class="card-footer bg-transparent border-0 d-flex justify-content-center">
          <!-- Ссылка на Instagram с обработкой, если не указан -->
          {% if master.instagram %}
          <a href="https://instagram.com/{{ master.instagram|cut:'@' }}" 
             class="btn btn-outline-danger btn-sm me-2"
             target="_blank">
            <i class="bi bi-instagram me-1"></i> Instagram
          </a>
          {% endif %}
          <!-- Кнопка для перехода к форме записи -->
          <a href="#order" class="btn btn-primary btn-sm">Записаться</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<!-- Секция с услугами - также динамическая, данные из БД -->
<section id="services" class="container py-5 fade-in">
  <h2 class="text-center mb-5">Наши услуги</h2>
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card border-0 shadow">
        <div class="card-body p-0">
          <ul class="list-group list-group-flush">
            {% for service in services %}
            <li class="list-group-item d-flex justify-content-between align-items-center py-3">
              <div class="d-flex align-items-center">
                <i class="bi bi-scissors text-primary fs-5 me-3"></i>
                <span class="fw-medium">{{ service.name }}</span>
              </div>
              <span class="badge bg-primary rounded-pill fs-6">{{ service.price }}₽</span>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Секция с отзывами - статичная, в реальном проекте можно сделать динамической -->
<section id="reviews" class="container py-5 fade-in">
  <h2 class="text-center mb-5">Отзывы клиентов</h2>
  <div class="row">
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card h-100 shadow-sm">
        <div class="card-body">
          <p class="card-text">"Отличное место! Уютная атмосфера и профессиональные мастера. Прихожу уже третий раз — всегда доволен!"</p>
          <h6 class="card-subtitle mt-3 text-muted">— Алексей, 32 года</h6>
        </div>
      </div>
    </div>
    <!-- Еще два аналогичных отзыва -->
  </div>
</section>

<!-- Секция с преимуществами барбершопа -->
<section class="container py-5 fade-in">
  <h2 class="text-center mb-5">Почему мы?</h2>
  <div class="row text-center">
    <div class="col-md-4 mb-4">
      <div class="card h-100 border-0">
        <div class="card-body">
          <i class="bi bi-award display-5 text-primary mb-3"></i>
          <h5>Опытные мастера</h5>
          <p>Каждый мастер — профессионал с большим опытом и чувством стиля.</p>
        </div>
      </div>
    </div>
    <!-- Еще два преимущества -->
  </div>
</section>

<!-- Основная секция с формой записи -->
<section id="order" class="container py-5 bg-light fade-in">
  <h2 class="text-center mb-5">Записаться</h2>
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <form method="post" novalidate class="card border-0 shadow p-4">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <!-- Поле для имени -->
        <div class="mb-3">
          <label for="{{ form.client_name.id_for_label }}" class="form-label text-dark">Имя</label>
          {{ form.client_name }}
          {{ form.client_name.errors }}
        </div>

        <!-- Поле для телефона -->
        <div class="mb-3">
          <label for="{{ form.phone.id_for_label }}" class="form-label text-dark">Телефон</label>
          {{ form.phone }}
          {{ form.phone.errors }}
        </div>

        <!-- Поле для даты и времени -->
        <div class="mb-3">
          <label for="{{ form.date.id_for_label }}" class="form-label text-dark">Дата и время записи</label>
          {{ form.date }}
          {{ form.date.errors }}
        </div>

        <!-- Выбор мастера -->
        <div class="mb-3">
          <label for="{{ form.master.id_for_label }}" class="form-label text-dark">Мастер</label>
          {{ form.master }}
          {{ form.master.errors }}
        </div>

        <!-- Выбор услуг (множественный выбор) -->
        <div class="mb-3">
          <label class="form-label text-dark">Услуги</label>
          {{ form.services }}
          {{ form.services.errors }}
        </div>

        <!-- Кнопка отправки формы -->
        <button type="submit" class="btn btn-primary w-100 py-2">Записаться</button>
      </form>
    </div>
  </div>
</section>

<!-- Стили для формы записи, включая поддержку темной темы -->
<style>
  /* Основные стили формы */
  #order .card {
    background-color: #f8f9fa;
  }
  #order .form-label {
    color: #495057;
    font-weight: 500;
  }
  #order .form-control, 
  #order .form-select {
    background-color: white;
    border: 1px solid #ced4da;
  }
  
  /* Адаптация под темную тему */
  .dark-theme #order .card {
    background-color: #2c2c2c;
  }
  .dark-theme #order .form-label {
    color: #e0e0e0 !important;
  }
  .dark-theme #order .form-control,
  .dark-theme #order .form-select {
    background-color: #1e1e1e !important;
    border-color: #3a3a3a !important;
    color: white !important;
  }
  
  /* Дополнительные стили для статусов */
  .badge.bg-secondary {
    background-color: #6c757d !important;
    color: white !important;
  }
</style>

{% endblock %}